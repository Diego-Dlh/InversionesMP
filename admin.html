<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Admin • InversionesMP</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark">
  <style>
    /* Scrollbars y campos tipo Material (blanco/negro) */
    :root { color-scheme: light; }

    /* Scrollbar sutil para contenedores de tablas */
    .table-scroll { scrollbar-width: thin; scrollbar-color: rgba(0,0,0,.25) transparent; }
    .table-scroll::-webkit-scrollbar { height: 8px; }
    .table-scroll::-webkit-scrollbar-track { background: transparent; }
    .table-scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,.25); border-radius: 9999px; }
    .table-scroll:hover::-webkit-scrollbar-thumb { background: rgba(0,0,0,.40); }

    /* Inputs estilo Material (relleno translúcido) */
    .md-input, .md-select {
      background: rgba(0,0,0,.04);
      border: 1px solid rgba(0,0,0,.18);
      border-radius: 12px;
      padding: 0.5rem 0.75rem;
      box-shadow: 0 1px 2px rgba(0,0,0,.04) inset;
      transition: border-color .2s, box-shadow .2s, background-color .2s;
    }
    .md-input::placeholder { color: #6b7280; }
    .md-input:focus, .md-select:focus {
      outline: none;
      border-color: rgba(0,0,0,.50);
      box-shadow: 0 0 0 4px rgba(0,0,0,.08);
      background: rgba(0,0,0,.02);
    }

    /* Botón de acción pequeño */
    .btn-xs { font-size: 0.75rem; line-height: 1rem; padding: 0.375rem 0.625rem; border-radius: 0.5rem; }
    .btn-danger { border: 1px solid #ef4444; color: #ef4444; background: transparent; transition: background-color .2s, color .2s; }
    .btn-danger:hover { background: #ef4444; color: #fff; }
  </style>
</head>
<body class="bg-white text-gray-900 antialiased">
  <!-- Header -->
  <header class="sticky top-0 z-40 border-b border-gray-200 bg-black text-white">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <h1 class="text-lg sm:text-xl font-semibold tracking-tight">InversionesMP • Panel Admin</h1>
      <button id="logout-btn" class="inline-flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-black shadow hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-black">
        <span>Salir</span>
      </button>
    </div>
  </header>

  <!-- Contenido principal -->
  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6 space-y-8">
    <!-- Resumen -->
    <section aria-labelledby="resumen-title">
      <h2 id="resumen-title" class="sr-only">Resumen</h2>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
        <!-- Card genérico -->
        <div class="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm">
          <p class="text-sm text-gray-600">Clientes registrados</p>
          <p class="mt-1 text-3xl font-bold text-black"><span id="deudores-count">0</span></p>
        </div>
        <div class="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm">
          <p class="text-sm text-gray-600">Préstamos</p>
          <p class="mt-1 text-3xl font-bold text-black"><span id="prestamos-count">0</span></p>
        </div>
        <div class="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm">
          <p class="text-sm text-gray-600">Pagos</p>
          <p class="mt-1 text-3xl font-bold text-black"><span id="pagos-count">0</span></p>
        </div>
        <div class="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm">
          <p class="text-sm text-gray-600">Cobradores activos</p>
          <p class="mt-1 text-2xl font-bold text-black"><span id="usuarios-count">0</span></p>
        </div>
        <div class="rounded-2xl border border-gray-900 bg-black p-5 shadow-sm">
          <p class="text-sm text-gray-300">Total recaudado (mes)</p>
          <p class="mt-1 text-3xl font-bold text-white">$<span id="total-recaudado">0</span></p>
        </div>
      </div>
    </section>

    <!-- Zona acciones rápidas -->
    <section class="grid grid-cols-1 gap-6 lg:grid-cols-3">
      <!-- Deudores -->
      <div class="lg:col-span-2 rounded-2xl border border-gray-200 bg-white shadow-sm">
        <div class="px-5 pt-5 pb-4 border-b border-gray-100 flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
          <div>
            <h2 class="text-lg font-semibold text-black">Deudores</h2>
            <p class="text-sm text-gray-500">Busca por nombre o identificación.</p>
          </div>
          <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
            <label class="sr-only" for="buscar-deudor">Buscar deudor</label>
            <input id="buscar-deudor" type="text" inputmode="search" placeholder="Nombre o identificación" class="md-input w-full sm:w-72" />
            <button id="btn-toggle-modal-deudor" class="rounded-xl bg-black px-4 py-2 text-sm font-medium text-white shadow hover:bg-gray-900 active:scale-[0.98]">Agregar Deudor</button>
            <button id="btn-toggle-modal-prestamo" class="rounded-xl border border-black px-4 py-2 text-sm font-medium text-black hover:bg-black hover:text-white transition">Hacer Préstamo</button>
          </div>
        </div>
        <div class="table-scroll overflow-x-auto">
          <table class="min-w-[860px] w-full text-sm">
            <thead class="bg-gray-50 text-gray-700">
              <tr class="border-b border-gray-200">
                <th class="p-3 text-left">Nombre</th>
                <th class="p-3 text-left">Identificación</th>
                <th class="p-3 text-left">Teléfono</th>
                <th class="p-3 text-left">Dirección</th>
                <th class="p-3 text-left">Tipo</th>
                <th class="p-3 text-left w-28">Acciones</th>
              </tr>
            </thead>
            <tbody id="tabla-deudores-container" class="divide-y divide-gray-100">
              <!-- JS inserta filas -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Cobradores -->
      <div class="rounded-2xl border border-gray-200 bg-white shadow-sm">
        <div class="px-5 pt-5 pb-4 border-b border-gray-100 flex items-center justify-between">
          <h2 class="text-lg font-semibold text-black">Cobradores</h2>
          <button id="btn-toggle-modal" class="rounded-xl bg-black px-4 py-2 text-sm font-medium text-white shadow hover:bg-gray-900 active:scale-[0.98]">Agregar</button>
        </div>
        <div class="table-scroll overflow-x-auto">
          <table class="min-w-[560px] w-full text-sm">
            <thead class="bg-gray-50 text-gray-700">
              <tr class="border-b border-gray-200">
                <th class="p-3 text-left">Nombre</th>
                <th class="p-3 text-left">Identificación</th>
                <th class="p-3 text-left">Teléfono</th>
                <th class="p-3 text-left w-28">Acciones</th>
              </tr>
            </thead>
            <tbody id="tabla-cobradores-container" class="divide-y divide-gray-100">
              <!-- JS inserta filas -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Préstamos -->
    <section class="rounded-2xl border border-gray-200 bg-white shadow-sm">
      <div class="px-5 pt-5 pb-4 border-b border-gray-100">
        <h2 class="text-lg font-semibold text-black">Préstamos</h2>
        <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label for="buscar-prestamo" class="block text-xs font-medium text-gray-700 mb-1">Buscar por nombre</label>
            <input id="buscar-prestamo" type="text" placeholder="Nombre del deudor" class="md-input w-full" />
          </div>
          <div>
            <label for="filtro-estado" class="block text-xs font-medium text-gray-700 mb-1">Estado</label>
            <select id="filtro-estado" class="md-select w-full">
              <option value="">Todos</option>
              <option value="1">Pendiente</option>
              <option value="2">Pagado</option>
              <option value="3">En mora</option>
            </select>
          </div>
          <div>
            <label for="filtro-cobrador" class="block text-xs font-medium text-gray-700 mb-1">Cobrador</label>
            <select id="filtro-cobrador" class="md-select w-full">
              <option value="">Todos</option>
            </select>
          </div>
        </div>
      </div>
      <div class="table-scroll overflow-x-auto">
        <table class="min-w-[980px] w-full text-sm">
          <thead class="bg-gray-50 text-gray-700">
            <tr class="border-b border-gray-200">
              <th class="p-3 text-left">Deudor</th>
              <th class="p-3 text-left">Monto</th>
              <th class="p-3 text-left">Saldo Pendiente</th>
              <th class="p-3 text-left">Meses</th>
              <th class="p-3 text-left">Fecha</th>
              <th class="p-3 text-left">Estado</th>
              <th class="p-3 text-left">Cobrador</th>
            </tr>
          </thead>
          <tbody id="tabla-prestamos-container" class="divide-y divide-gray-100">
            <!-- JS inserta filas -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Pagos -->
    <section class="rounded-2xl border border-gray-200 bg-white shadow-sm">
      <div class="px-5 pt-5 pb-4 border-b border-gray-100 flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
        <div>
          <h2 class="text-lg font-semibold text-black">Pagos</h2>
          <div class="mt-3 w-full sm:w-64">
            <label for="filtro-mes" class="block text-xs font-medium text-gray-700 mb-1">Filtrar por mes</label>
            <select id="filtro-mes" class="md-select w-full">
              <option value="">Todos</option>
              <option value="1">Enero</option>
              <option value="2">Febrero</option>
              <option value="3">Marzo</option>
              <option value="4">Abril</option>
              <option value="5">Mayo</option>
              <option value="6">Junio</option>
              <option value="7">Julio</option>
              <option value="8">Agosto</option>
              <option value="9">Septiembre</option>
              <option value="10">Octubre</option>
              <option value="11">Noviembre</n>
              <option value="12">Diciembre</option>
            </select>
          </div>
        </div>
        <div class="flex gap-3">
          <button id="btn-toggle-modal-pago" class="rounded-xl bg-black px-4 py-2 text-sm font-medium text-white shadow hover:bg-gray-900 active:scale-[0.98]">Registrar Pago</button>
        </div>
      </div>
      <div class="table-scroll overflow-x-auto">
        <table class="min-w-[720px] w-full text-sm">
          <thead class="bg-gray-50 text-gray-700">
            <tr class="border-b border-gray-200">
              <th class="p-3 text-left">Deudor</th>
              <th class="p-3 text-left">Cobrador</th>
              <th class="p-3 text-left">Monto</th>
              <th class="p-3 text-left">Fecha</th>
            </tr>
          </thead>
          <tbody id="tabla-pagos-container" class="divide-y divide-gray-100">
            <!-- JS inserta filas -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="mt-8 border-t border-gray-200 bg-black text-white">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6 text-center text-sm">© 2025 InversionesMP. Todos los derechos reservados HozballSolution.</div>
  </footer>

  <!-- Toasts -->
  <div id="toast-exito" class="fixed bottom-6 right-6 hidden rounded-xl bg-emerald-600 px-4 py-3 text-white shadow-lg">✅ Acción exitosa</div>
  <div id="toast-error" class="fixed bottom-6 right-6 hidden rounded-xl bg-red-600 px-4 py-3 text-white shadow-lg">❌ Ha ocurrido un error.</div>

  <!-- Modales -->
  <!-- Modal Deudor -->
  <div id="modal-deudor" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
    <div class="mx-auto mt-20 w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-lg">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Nuevo Deudor</h3>
        <button id="btn-close-modal-deudor" class="rounded-lg p-1 text-gray-500 hover:bg-gray-100" aria-label="Cerrar">✕</button>
      </div>
      <form id="form-deudor" class="space-y-3">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <input id="deudor-nombre" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Nombre" required />
          <input id="deudor-apellido" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Apellido" required />
          <input id="deudor-identificacion" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Identificación" required />
          <input id="deudor-telefono" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Teléfono" />
          <input id="deudor-direccion" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Dirección" />
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <select id="deudor-tipo" class="rounded-xl border border-gray-300 px-3 py-2" required>
            <option value="">Tipo de Deudor</option>
            <option value="1">Normal</option>
            <option value="2">Especial</option>
          </select>
          <select id="deudor-cobrador" class="rounded-xl border border-gray-300 px-3 py-2" required>
            <option value="">Seleccionar Cobrador</option>
          </select>
        </div>
        <button class="w-full rounded-xl bg-black px-4 py-2 text-white" type="submit">Guardar</button>
      </form>
    </div>
  </div>

  <!-- Modal Cobrador -->
  <div id="modal-cobrador" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
    <div class="mx-auto mt-20 w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-lg">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Nuevo Cobrador</h3>
        <button id="btn-close-modal" class="rounded-lg p-1 text-gray-500 hover:bg-gray-100" aria-label="Cerrar">✕</button>
      </div>
      <form id="form-cobrador" class="space-y-3">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <input id="nuevo-nombre" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Nombre" required />
          <input id="nuevo-apellido" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Apellido" required />
          <input id="nuevo-identificacion" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Identificación" required />
          <input id="nuevo-telefono" class="rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="Teléfono" />
        </div>
        <button class="w-full rounded-xl bg-black px-4 py-2 text-white" type="submit">Guardar</button>
      </form>
    </div>
  </div>

  <!-- Modal Préstamo -->
  <div id="modal-prestamo" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
    <div class="mx-auto mt-20 w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-lg">
      <h3 class="text-lg font-semibold mb-4">Registrar Préstamo</h3>
      <form id="form-prestamo" class="space-y-3">
        <select id="prestamo-deudor" required class="w-full rounded-xl border border-gray-300 px-3 py-2">
          <option value="">Seleccione deudor</option>
        </select>
        <input id="prestamo-monto" type="number" required placeholder="Monto" class="w-full rounded-xl border border-gray-300 px-3 py-2" />
        <select id="prestamo-interes" required class="w-full rounded-xl border border-gray-300 px-3 py-2">
          <option value="">Interés (%)</option>
          <option value="10">10%</option>
          <option value="15">15%</option>
          <option value="20">20%</option>
        </select>
        <select id="prestamo-meses" required class="w-full rounded-xl border border-gray-300 px-3 py-2">
          <option value="">Plazo (meses)</option>
          <option value="1">1 mes</option>
          <option value="2">2 meses</option>
        </select>
        <input id="prestamo-fecha" type="date" required class="w-full rounded-xl border border-gray-300 px-3 py-2" />
        <div class="flex justify-end gap-2 pt-2">
          <button type="submit" class="rounded-xl bg-black px-4 py-2 text-white">Guardar</button>
          <button id="cerrar-modal-prestamo" type="button" class="rounded-xl border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Pago -->
  <div id="modal-pago" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
    <div class="mx-auto mt-20 w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-lg">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">Nuevo Pago</h3>
        <button id="btn-close-modal-pago" class="rounded-lg p-1 text-gray-500 hover:bg-gray-100" aria-label="Cerrar">✕</button>
      </div>
      <form id="form-pago" class="space-y-3">
        <select id="pago-prestamo" required class="w-full rounded-xl border border-gray-300 px-3 py-2">
          <option value="">Seleccionar Préstamo</option>
        </select>
        <input id="pago-monto" type="number" required placeholder="Monto Pagado" class="w-full rounded-xl border border-gray-300 px-3 py-2" />
        <input id="pago-fecha" type="date" required class="w-full rounded-xl border border-gray-300 px-3 py-2" />
        <button type="submit" class="w-full rounded-xl bg-black px-4 py-2 text-white">Guardar</button>
      </form>
    </div>
  </div>

  <!-- Script: mantener la misma ruta para compatibilidad con tu JS actual -->
  <script type="module" src="js/admin.js"></script>
</body>
</html>
